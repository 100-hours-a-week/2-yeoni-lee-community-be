
<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="3_memo_list.css">
    <title>게시물 목록 조회</title>
</head>
<body>
    <section class="wrap">
        <h1 class="name">아무 말 대잔치</h1>
        <h2 class="name">안녕하세요, 아무 말 대잔치 게시판입니다.</h2>
        <article class="post">
            <h2 class="post-title">제목1</h2>
            <div class="post-stats">
                <span class="stat">좋아요: 0</span>
                <span class="stat">댓글: 0</span>
                <span class="stat">조회수: 0</span>
                <span class="stat time"></span>
            </div>
            <hr class="horizontal-rule" />
            <div class="author">
                <div class="profile-pic"></div>
                <span class="author-name">더미작성자 1</span>
            </div>
        </article>
        <article class="post">
            <h2 class="post-title">제목2</h2>
            <div class="post-stats">
                <span class="stat">좋아요: 0</span>
                <span class="stat">댓글: 0</span>
                <span class="stat">조회수: 0</span>
                <span class="stat time">2024-11-04 10:09:09</span>
            </div>
            <hr class="horizontal-rule" />
            <div class="author">
                <div class="profile-pic"></div>
                <span class="author-name">더미작성자 1</span>
            </div>
        </article>
        <article class="post">
            <h2 class="post-title">제목3</h2>
            <div class="post-stats">
                <span class="stat">좋아요: 0</span>
                <span class="stat">댓글: 0</span>
                <span class="stat">조회수: 0</span>
                <span class="stat time">0000-00-00 10:09:09</span>
            </div>
            <hr class="horizontal-rule" />
            <div class="author">
                <div class="profile-pic"></div>
                <span class="author-name">더미작성자 1</span>
            </div>
        </article>
    </section>
    <script>
        // 서버에서 메모 데이터를 가져와 HTML에 채워넣는 함수
        async function fetchMemos() {
            try {
                // 서버에서 메모 데이터를 가져옵니다.
                const response = await fetch('/memo_list');
                const memos = await response.json();
    
                // HTML에서 기존의 <article> 요소를 모두 가져옵니다.
                const articles = document.querySelectorAll('.post');
    
                // 최대 3개의 메모 데이터를 기존 HTML에 채웁니다.
                memos.slice(0, 3).forEach((memo, index) => {
                    if (articles[index]) {
                        articles[index].querySelector('.post-title').textContent = memo.title || '제목 없음';
                        articles[index].querySelector('.time').textContent = memo.time || '0000-00-00 00:00:00';
                        articles[index].querySelector('.author-name').textContent = memo.username || '익명';
                    }
                });
            } catch (err) {
                console.error('메모를 가져오는 중 오류 발생:', err);
            }
        }
    
        // 호출
        fetchMemos();
    </script>
    
</body>
</html>