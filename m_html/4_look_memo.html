<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="4_look_memo.css">
    <title>게시물 상세보기</title>
</head>
<body>
    <section class="wrap">
        <div class="buttons">
            <button class="menu" id="log_out_btn">로그아웃</button>
            <button class="menu" id="write_memo">게시물 작성</button>
            <button class="menu" id="mod_my_btn">내 정보 수정</button>
            <button class="menu" id="list_memo">게시물 목록</button>
        </div>
        <h1 class="name">아무 말 대잔치</h1>
        <article class="post">
            <h2 class="post-title">제목 로딩 중...</h2>
            <div class="post-info">
                <span class="username">작성자 로딩 중...</span>
                <span class="time">시간 로딩 중...</span>
                <div class="action-buttons">
                    <!-- 수정 버튼 -->
                    <a class="edit" href="#">수정</a>
                    <!-- 삭제 버튼 -->
                    <button class="delete" id="delete-btn">삭제</button>
                </div>
            </div>
            <hr class="horizontal-rule" />
            <!-- 이미지 추가 -->
            <img id="memo-img" src="" alt="게시물 이미지" style="max-width: 100%; display: none; margin: 20px 0;">
            <p class="context">내용 로딩 중...</p>
        </article>
        <article class="comment-input">
            <input type="text" id="comment" name="comment" required>
        </article>
        <input type="text" id="title" name="title" required>
        
    </section>

    <script>
        // 페이지 이동 버튼 설정
        document.getElementById('mod_my_btn').addEventListener('click', () => {
            window.location.href = '/my_info';
        });

        document.getElementById('write_memo').addEventListener('click', () => {
            window.location.href = '/add_memo';
        });

        document.getElementById('list_memo').addEventListener('click', () => {
            window.location.href = '/memo_list';
        });

        document.getElementById('log_out_btn').addEventListener('click', () => {
            window.location.href = '/login';
        });

        // 쿼리 파라미터에서 데이터 가져오기
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                title: params.get('title') || '제목 없음',
                context: params.get('context') || '내용 없음',
                username: params.get('username') || '익명',
                time: params.get('time') || '알 수 없음',
                img: params.get('img') || '', // 이미지 파일명 추가
            };
        }

        // 상세 정보 출력
        function displayMemoDetails() {
            const { title, context, username, time, img } = getQueryParams();

            document.querySelector('.post-title').textContent = title;
            document.querySelector('.context').textContent = context;
            document.querySelector('.username').textContent = username;
            document.querySelector('.time').textContent = time;

            // 이미지 표시
            const memoImg = document.getElementById('memo-img');
            if (img && img !== 'null') {
                memoImg.src = img; // JSON에 저장된 경로를 src에 할당
                memoImg.style.display = 'block'; // 이미지 보이기
            } else {
                memoImg.style.display = 'none'; // 이미지가 없으면 숨기기
            }
        }

        // 호출
        displayMemoDetails();
    </script>
</body>
</html>
